services:
    traefik-proxy:
        labels:
            # Backend-specific security headers
            - "traefik.http.middlewares.backend-security.headers.customrequestheaders.X-Gateway-Verified=true"

            # Backend rate limiting (stricter for APIs)
            - "traefik.http.middlewares.backend-rate-limit.ratelimit.average=30"
            - "traefik.http.middlewares.backend-rate-limit.ratelimit.burst=15"
            - "traefik.http.middlewares.backend-rate-limit.ratelimit.period=1s"

            # Backend CORS (more restrictive for APIs)
            - "traefik.http.middlewares.backend-cors.headers.accesscontrolallowheaders=Content-Type,Authorization,X-Requested-With,X-Gateway-Verified"
            - "traefik.http.middlewares.backend-cors.headers.accesscontrolallowmethods=GET,POST,PUT,DELETE,OPTIONS"
            - "traefik.http.middlewares.backend-cors.headers.accesscontrolalloworiginlist=${DOMAIN}"
            - "traefik.http.middlewares.backend-cors.headers.accesscontrolallowcredentials=true"

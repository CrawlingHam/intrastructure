services:
    traefik-proxy:
        labels:
            # Frontend-specific security headers
            - "traefik.http.middlewares.frontend-security.headers.customrequestheaders.X-Frontend-Gateway=true"

            # Frontend rate limiting
            - "traefik.http.middlewares.frontend-rate-limit.ratelimit.average=100"
            - "traefik.http.middlewares.frontend-rate-limit.ratelimit.burst=50"
            - "traefik.http.middlewares.frontend-rate-limit.ratelimit.period=1s"

            # Frontend CORS
            - "traefik.http.middlewares.frontend-cors.headers.accesscontrolallowheaders=Content-Type,Authorization,X-Requested-With"
            - "traefik.http.middlewares.frontend-cors.headers.accesscontrolallowmethods=GET,POST,OPTIONS"
            - "traefik.http.middlewares.frontend-cors.headers.accesscontrolalloworiginlist=${DOMAIN}"
            - "traefik.http.middlewares.frontend-cors.headers.accesscontrolallowcredentials=true"

            # Frontend router configuration
            - "traefik.http.routers.frontend-router.rule=Host(`${HOSTNAME}`) && !PathPrefix(`/api`)"
            - "traefik.http.routers.frontend-router.middlewares=global-security,frontend-rate-limit,timeout,global-compress,frontend-cors"
            - "traefik.http.routers.frontend-router.tls.certresolver=myresolver"
            - "traefik.http.routers.frontend-router.entrypoints=web,websecure"
